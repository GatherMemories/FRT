##  æ–°é¡¹ç›®ç»“æ„è®¾è®¡ï¼ˆå®Œå…¨é‡å†™ç‰ˆï¼‰

åŸºäºåˆšæ‰çš„è®¾è®¡æ¨¡å¼æ–¹æ¡ˆï¼Œæˆ‘å°†ä¸ºæ‚¨è®¾è®¡ä¸€ä¸ªæ¸…æ™°ã€å¯æ‰©å±•çš„é¡¹ç›®ç»“æ„ï¼š

```txt
src/main/java/com/awei/frt/
â”œâ”€â”€ Main.java                              # ç¨‹åºå…¥å£
â”‚
â”œâ”€â”€ core/                                  # æ ¸å¿ƒæ¡†æ¶å±‚ï¼ˆè®¾è®¡æ¨¡å¼å®ç°ï¼‰
â”‚   â”œâ”€â”€ context/                           # ä¸Šä¸‹æ–‡ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ OperationContext.java          # æ“ä½œä¸Šä¸‹æ–‡ï¼ˆç®¡ç†æ“ä½œçŠ¶æ€ï¼‰
â”‚   â”‚   â””â”€â”€ RuleInheritanceContext.java     # è§„åˆ™ç»§æ‰¿ä¸Šä¸‹æ–‡ï¼ˆç®¡ç†è§„åˆ™é“¾ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ node/                              # æ–‡ä»¶èŠ‚ç‚¹ï¼ˆç»„åˆæ¨¡å¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ FileNode.java                  # æ–‡ä»¶èŠ‚ç‚¹æŠ½è±¡åŸºç±»
â”‚   â”‚   â”œâ”€â”€ FolderNode.java                # æ–‡ä»¶å¤¹èŠ‚ç‚¹
â”‚   â”‚   â””â”€â”€ FileLeaf.java                  # æ–‡ä»¶èŠ‚ç‚¹ï¼ˆå¶å­ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ strategy/                          # æ“ä½œç­–ç•¥ï¼ˆç­–ç•¥æ¨¡å¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ OperationStrategy.java         # æ“ä½œç­–ç•¥æ¥å£
â”‚   â”‚   â”œâ”€â”€ AddStrategy.java               # æ–°å¢ç­–ç•¥
â”‚   â”‚   â”œâ”€â”€ ReplaceStrategy.java            # æ›¿æ¢ç­–ç•¥
â”‚   â”‚   â””â”€â”€ DeleteStrategy.java            # åˆ é™¤ç­–ç•¥
â”‚   â”‚
â”‚   â””â”€â”€ builder/                           # æ„å»ºå™¨
â”‚       â”œâ”€â”€ FileTreeBuilder.java           # æ–‡ä»¶æ ‘æ„å»ºå™¨
â”‚       â””â”€â”€ ProcessorContext.java          # å¤„ç†å™¨ä¸Šä¸‹æ–‡å·¥å‚
â”‚
â”œâ”€â”€ service/                               # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”œâ”€â”€ FileReplaceService.java             # æ–‡ä»¶æ›¿æ¢æœåŠ¡ï¼ˆä½¿ç”¨æ ¸å¿ƒæ¡†æ¶ï¼‰
â”‚   â”œâ”€â”€ RestoreService.java                # æ¢å¤æœåŠ¡ï¼ˆä½¿ç”¨æ ¸å¿ƒæ¡†æ¶ï¼‰
â”‚   â””â”€â”€ ValidationService.java              # éªŒè¯æœåŠ¡ï¼ˆè·¯å¾„æ£€æŸ¥ç­‰ï¼‰
â”‚
â”œâ”€â”€ model/                                 # æ•°æ®æ¨¡å‹å±‚
â”‚   â”œâ”€â”€ Config.java                        # é…ç½®æ¨¡å‹
â”‚   â”œâ”€â”€ ReplaceRule.java                   # æ›¿æ¢è§„åˆ™æ¨¡å‹
â”‚   â”œâ”€â”€ OperationRecord.java               # æ“ä½œè®°å½•æ¨¡å‹
â”‚   â””â”€â”€ ProcessingResult.java              # å¤„ç†ç»“æœæ¨¡å‹ï¼ˆæ–°å¢ï¼‰
â”‚
â”œâ”€â”€ utils/                                 # å·¥å…·ç±»å±‚
â”‚   â”œâ”€â”€ ConfigLoader.java                  # é…ç½®åŠ è½½å™¨
â”‚   â”œâ”€â”€ FileUtils.java                     # æ–‡ä»¶å·¥å…·ç±»
â”‚   â”œâ”€â”€ PatternMatcher.java                # æ¨¡å¼åŒ¹é…å·¥å…·ï¼ˆæ–°å¢ï¼‰
â”‚   â””â”€â”€ PathUtils.java                     # è·¯å¾„å·¥å…·ç±»ï¼ˆæ–°å¢ï¼‰
â”‚
â”œâ”€â”€ factory/                               # å·¥å‚å±‚
â”‚   â”œâ”€â”€ StrategyFactory.java               # ç­–ç•¥å·¥å‚ï¼ˆåˆ›å»ºæ“ä½œç­–ç•¥ï¼‰
â”‚   â””â”€â”€ NodeFactory.java                   # èŠ‚ç‚¹å·¥å‚ï¼ˆåˆ›å»ºæ–‡ä»¶èŠ‚ç‚¹ï¼‰
â”‚
â”œâ”€â”€ handler/                               # å¤„ç†å™¨å±‚ï¼ˆè´£ä»»é“¾æ¨¡å¼æ‰©å±•ï¼‰
â”‚   â”œâ”€â”€ FileHandler.java                   # æ–‡ä»¶å¤„ç†å™¨æ¥å£
â”‚   â”œâ”€â”€ RuleHandler.java                   # è§„åˆ™å¤„ç†å™¨
â”‚   â”œâ”€â”€ BackupHandler.java                 # å¤‡ä»½å¤„ç†å™¨
â”‚   â””â”€â”€ LoggingHandler.java                # æ—¥å¿—å¤„ç†å™¨
â”‚
â””â”€â”€ exception/                             # å¼‚å¸¸å±‚
    â”œâ”€â”€ FRTException.java                  # åŸºç¡€å¼‚å¸¸ç±»
    â”œâ”€â”€ RuleNotFoundException.java         # è§„åˆ™æœªæ‰¾åˆ°å¼‚å¸¸
    â”œâ”€â”€ FileOperationException.java        # æ–‡ä»¶æ“ä½œå¼‚å¸¸
    â””â”€â”€ ValidationException.java           # éªŒè¯å¼‚å¸¸
```

## ğŸ“‹ ç±»çš„åˆ†ç±»å’ŒèŒè´£è¯´æ˜

### ğŸ—ï¸ 1. **core/** - æ ¸å¿ƒæ¡†æ¶å±‚

**èŒè´£**ï¼šå®ç°è®¾è®¡æ¨¡å¼ï¼Œæä¾›å¯å¤ç”¨çš„æ ¸å¿ƒåŠŸèƒ½

#### **context/** - ä¸Šä¸‹æ–‡ç®¡ç†

```
OperationContext.java          â†’ ç®¡ç†æ“ä½œçš„å…¨å±€çŠ¶æ€ï¼ˆæˆåŠŸ/è·³è¿‡/å¤±è´¥è®¡æ•°ï¼‰
RuleInheritanceContext.java     â†’ ç®¡ç†è§„åˆ™çš„ç»§æ‰¿é“¾ï¼ˆçˆ¶å­è§„åˆ™ä¼ é€’ï¼‰
```

#### **node/** - æ–‡ä»¶èŠ‚ç‚¹ï¼ˆç»„åˆæ¨¡å¼ï¼‰

```
FileNode.java                  â†’ æŠ½è±¡åŸºç±»ï¼Œå®šä¹‰èŠ‚ç‚¹çš„é€šç”¨æ¥å£
FolderNode.java                â†’ å¤åˆèŠ‚ç‚¹ï¼ŒåŒ…å«å­èŠ‚ç‚¹ï¼Œé€’å½’å¤„ç†
FileLeaf.java                  â†’ å¶å­èŠ‚ç‚¹ï¼Œå®é™…æ‰§è¡Œæ–‡ä»¶æ“ä½œ
```

#### **strategy/** - æ“ä½œç­–ç•¥ï¼ˆç­–ç•¥æ¨¡å¼ï¼‰

```
OperationStrategy.java         â†’ ç­–ç•¥æ¥å£ï¼Œå®šä¹‰ execute() æ–¹æ³•
AddStrategy.java               â†’ æ–°å¢æ–‡ä»¶çš„å…·ä½“ç­–ç•¥
ReplaceStrategy.java            â†’ æ›¿æ¢æ–‡ä»¶çš„å…·ä½“ç­–ç•¥
DeleteStrategy.java            â†’ åˆ é™¤æ–‡ä»¶çš„å…·ä½“ç­–ç•¥
```

#### **builder/** - æ„å»ºå™¨

```
FileTreeBuilder.java           â†’ å°†æ–‡ä»¶å¤¹ç»“æ„è½¬æ¢ä¸ºèŠ‚ç‚¹æ ‘
ProcessorContext.java          â†’ åˆ›å»ºå¤„ç†å™¨ä¸Šä¸‹æ–‡çš„å·¥å‚ç±»
```

### ğŸ’¼ 2. **service/** - ä¸šåŠ¡æœåŠ¡å±‚

**èŒè´£**ï¼šç»„è£…æ ¸å¿ƒæ¡†æ¶ï¼Œå®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘

```
FileReplaceService.java     â†’ 
  - ä½¿ç”¨ FileTreeBuilder æ„å»ºæ–‡ä»¶æ ‘
  - ä½¿ç”¨ StrategyFactory åˆ›å»ºæ“ä½œç­–ç•¥
  - åè°ƒå„ä¸ªç»„ä»¶å®Œæˆæ›¿æ¢æ“ä½œ
  
RestoreService.java        â†’
  - ä½¿ç”¨æ ¸å¿ƒæ¡†æ¶å®ç°æ¢å¤é€»è¾‘
  - å¤‡ä»½æ–‡ä»¶çš„ç®¡ç†å’Œæ¢å¤
  
ValidationService.java      â†’
  - è·¯å¾„æœ‰æ•ˆæ€§éªŒè¯
  - é…ç½®å®Œæ•´æ€§éªŒè¯
  - æƒé™æ£€æŸ¥
```

### ğŸ“¦ 3. **model/** - æ•°æ®æ¨¡å‹å±‚

**èŒè´£**ï¼šå®šä¹‰æ•°æ®ç»“æ„å’Œé…ç½®

```
Config.java                 â†’ å…¨å±€é…ç½®ï¼ˆè·¯å¾„é…ç½®ï¼‰
ReplaceRule.java            â†’ æ›¿æ¢è§„åˆ™ï¼ˆpatterns, excludePatterns, backupç­‰ï¼‰
OperationRecord.java        â†’ æ“ä½œè®°å½•ï¼ˆæ“ä½œç±»å‹ã€æ—¶é—´æˆ³ã€è·¯å¾„ï¼‰
ProcessingResult.java       â†’ å¤„ç†ç»“æœï¼ˆç»Ÿè®¡ä¿¡æ¯ã€çŠ¶æ€ï¼‰
```

### ğŸ”§ 4. **utils/** - å·¥å…·ç±»å±‚

**èŒè´£**ï¼šæä¾›é€šç”¨çš„å·¥å…·æ–¹æ³•

```
ConfigLoader.java           â†’ åŠ è½½é…ç½®æ–‡ä»¶ï¼ˆJSONï¼‰
FileUtils.java              â†’ æ–‡ä»¶æ“ä½œå·¥å…·ï¼ˆå¤åˆ¶ã€åˆ é™¤ã€éå†ï¼‰
PatternMatcher.java         â†’ æ¨¡å¼åŒ¹é…å·¥å…·ï¼ˆé€šé…ç¬¦ã€æ­£åˆ™ï¼‰
PathUtils.java              â†’ è·¯å¾„å¤„ç†å·¥å…·ï¼ˆç›¸å¯¹è·¯å¾„ã€è§„èŒƒåŒ–ï¼‰
```

### ğŸ­ 5. **factory/** - å·¥å‚å±‚

**èŒè´£**ï¼šåˆ›å»ºå¤æ‚å¯¹è±¡

```
StrategyFactory.java        â†’ æ ¹æ®æ“ä½œç±»å‹åˆ›å»ºå¯¹åº”çš„ç­–ç•¥
NodeFactory.java            â†’ æ ¹æ®æ–‡ä»¶ç±»å‹åˆ›å»ºå¯¹åº”çš„èŠ‚ç‚¹
```

### â›“ï¸ 6. **handler/** - å¤„ç†å™¨å±‚ï¼ˆæ‰©å±•ï¼‰

**èŒè´£**ï¼šè´£ä»»é“¾æ¨¡å¼ï¼Œå¤„ç†æ¨ªåˆ‡å…³æ³¨ç‚¹

```
FileHandler.java            â†’ å¤„ç†å™¨æ¥å£
RuleHandler.java            â†’ è§„åˆ™åŒ¹é…å¤„ç†å™¨
BackupHandler.java          â†’ å¤‡ä»½å¤„ç†å™¨
LoggingHandler.java         â†’ æ—¥å¿—è®°å½•å¤„ç†å™¨
```

### âš ï¸ 7. **exception/** - å¼‚å¸¸å±‚

**èŒè´£**ï¼šå®šä¹‰å’Œå¤„ç†å¼‚å¸¸

```
FRTException.java           â†’ åŸºç¡€å¼‚å¸¸ç±»
RuleNotFoundException.java    â†’ è§„åˆ™æœªæ‰¾åˆ°å¼‚å¸¸
FileOperationException.java   â†’ æ–‡ä»¶æ“ä½œå¼‚å¸¸
ValidationException.java    â†’ éªŒè¯å¼‚å¸¸
```

## ğŸ¯ å±‚æ¬¡ä¾èµ–å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Main.java (å…¥å£)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         service/ (ä¸šåŠ¡æœåŠ¡å±‚)             â”‚
â”‚  - FileReplaceService                    â”‚
â”‚  - RestoreService                        â”‚
â”‚  - ValidationService                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚
         â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   core/ (æ ¸å¿ƒå±‚) â”‚  â”‚  factory/ (å·¥å‚) â”‚
â”‚ - context       â”‚  â”‚ - StrategyFactory â”‚
â”‚ - node          â”‚  â”‚ - NodeFactory     â”‚
â”‚ - strategy      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ - builder       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  utils/ (å·¥å…·å±‚) â”‚
â”‚ - ConfigLoader  â”‚
â”‚ - FileUtils     â”‚
â”‚ - PatternMatcherâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  model/ (æ¨¡å‹å±‚) â”‚
â”‚ - Config        â”‚
â”‚ - ReplaceRule   â”‚
â”‚ - OperationRecordâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š æ¯ä¸ªç±»çš„è¯¦ç»†èŒè´£

### core/context/OperationContext.java

```java
/**
 * æ“ä½œä¸Šä¸‹æ–‡
 * èŒè´£ï¼š
 * 1. ç®¡ç†æ“ä½œçŠ¶æ€ï¼ˆæˆåŠŸ/è·³è¿‡/å¤±è´¥è®¡æ•°ï¼‰
 * 2. æä¾›å¤‡ä»½åŠŸèƒ½
 * 3. è®°å½•æ“ä½œç»“æœ
 * 4. ç”¨æˆ·ç¡®è®¤äº¤äº’
 */
public class OperationContext {
    private final Path basePath;           // åŸºå‡†ç›®å½•
    private final Path targetBasePath;     // ç›®æ ‡åŸºå‡†ç›®å½•
    private final Path backupPath;         // å¤‡ä»½ç›®å½•
    private final Scanner scanner;         // ç”¨æˆ·è¾“å…¥
    
    private final List<OperationRecord> records = new ArrayList<>();
    private int successCount = 0;
    private int skipCount = 0;
    private int errorCount = 0;
    
    // æ–¹æ³•ï¼šbackup(), confirm(), recordSuccess(), skip(), recordError()
}
```

### core/context/RuleInheritanceContext.java

```java
/**
 * è§„åˆ™ç»§æ‰¿ä¸Šä¸‹æ–‡
 * èŒè´£ï¼š
 * 1. ç®¡ç†è§„åˆ™çš„ç»§æ‰¿é“¾
 * 2. å†³å®šå­èŠ‚ç‚¹æ˜¯å¦ç»§æ‰¿çˆ¶èŠ‚ç‚¹è§„åˆ™
 * 3. æä¾›æœ‰æ•ˆè§„åˆ™çš„æŸ¥è¯¢
 */
public class RuleInheritanceContext {
    private final List<ReplaceRule> ruleChain;  // è§„åˆ™é“¾
    private final List<Path> rulePathChain;      // è§„åˆ™è·¯å¾„é“¾
    
    // æ–¹æ³•ï¼šgetEffectiveRule(), createChildContext(), hasAnyRule()
}
```

### core/node/FileNode.java

```java
/**
 * æ–‡ä»¶èŠ‚ç‚¹æŠ½è±¡åŸºç±»
 * èŒè´£ï¼š
 * 1. å®šä¹‰èŠ‚ç‚¹çš„é€šç”¨æ¥å£
 * 2. æä¾›è§„åˆ™æŸ¥è¯¢èƒ½åŠ›
 * 3. å®šä¹‰å¤„ç†æ–¹æ³•
 */
public abstract class FileNode {
    protected final Path path;
    protected final String relativePath;
    protected final RuleInheritanceContext ruleContext;
    
    // æŠ½è±¡æ–¹æ³•ï¼šprocess(OperationStrategy, OperationContext)
    // å…·ä½“æ–¹æ³•ï¼šgetEffectiveRule(), getPath(), getRelativePath()
}
```

### core/node/FolderNode.java

```java
/**
 * æ–‡ä»¶å¤¹èŠ‚ç‚¹
 * èŒè´£ï¼š
 * 1. ç®¡ç†å­èŠ‚ç‚¹åˆ—è¡¨
 * 2. é€’å½’å¤„ç†å­èŠ‚ç‚¹
 * 3. ä¼ é€’è§„åˆ™ä¸Šä¸‹æ–‡
 */
public class FolderNode extends FileNode {
    private final List<FileNode> children;
    
    // é‡å†™æ–¹æ³•ï¼šprocess() - å…ˆå¤„ç†æ–‡ä»¶ï¼Œå†é€’å½’å¤„ç†å­æ–‡ä»¶å¤¹
}
```

### core/node/FileLeaf.java

```java
/**
 * æ–‡ä»¶èŠ‚ç‚¹ï¼ˆå¶å­ï¼‰
 * èŒè´£ï¼š
 * 1. æ‰§è¡Œå…·ä½“çš„æ–‡ä»¶æ“ä½œ
 * 2. å§”æ‰˜ç»™ç­–ç•¥æ¨¡å¼å¤„ç†
 */
public class FileLeaf extends FileNode {
    // é‡å†™æ–¹æ³•ï¼šprocess() - è°ƒç”¨ç­–ç•¥çš„ execute() æ–¹æ³•
}
```

### core/strategy/OperationStrategy.java

```java
/**
 * æ“ä½œç­–ç•¥æ¥å£
 * èŒè´£ï¼š
 * 1. å®šä¹‰æ“ä½œçš„ç»Ÿä¸€æ¥å£
 * 2. è§£è€¦ä¸åŒç±»å‹çš„æ“ä½œ
 */
public interface OperationStrategy {
    void execute(FileLeaf fileNode, ReplaceRule rule, OperationContext context);
}
```

### core/strategy/AddStrategy.java

```java
/**
 * æ–°å¢ç­–ç•¥
 * èŒè´£ï¼š
 * 1. æ£€æŸ¥ç›®æ ‡æ–‡ä»¶ä¸å­˜åœ¨
 * 2. æ£€æŸ¥è§„åˆ™åŒ¹é…
 * 3. æ‰§è¡Œæ–‡ä»¶å¤åˆ¶
 */
public class AddStrategy implements OperationStrategy {
    @Override
    public void execute(FileLeaf fileNode, ReplaceRule rule, OperationContext context) {
        // æ–°å¢é€»è¾‘
    }
}
```

### core/builder/FileTreeBuilder.java

```java
/**
 * æ–‡ä»¶æ ‘æ„å»ºå™¨
 * èŒè´£ï¼š
 * 1. é€’å½’æ‰«ææ–‡ä»¶å¤¹
 * 2. åˆ›å»ºå¯¹åº”çš„èŠ‚ç‚¹å¯¹è±¡
 * 3. æ„å»ºæ ‘å½¢ç»“æ„
 */
public class FileTreeBuilder {
    public static FileNode buildTree(Path rootPath) {
        // é€’å½’æ„å»º
    }
    
    public static void printTree(FileNode node, int indent) {
        // æ‰“å°æ ‘ç»“æ„ï¼ˆè°ƒè¯•ç”¨ï¼‰
    }
}
```

### service/FileReplaceService.java

```java
/**
 * æ–‡ä»¶æ›¿æ¢æœåŠ¡
 * èŒè´£ï¼š
 * 1. ä½¿ç”¨ FileTreeBuilder æ„å»ºæ–‡ä»¶æ ‘
 * 2. ä½¿ç”¨ StrategyFactory åˆ›å»ºæ“ä½œç­–ç•¥
 * 3. åè°ƒå„ä¸ªç»„ä»¶å®Œæˆæ›¿æ¢æ“ä½œ
 * 4. æä¾›å‹å¥½çš„ç”¨æˆ·ç•Œé¢
 */
public class FileReplaceService {
    private final Config config;
    
    public void executeReplace() {
        // 1. æ„å»ºæ–‡ä»¶æ ‘
        FileNode tree = FileTreeBuilder.buildTree(updatePath);
        
        // 2. åˆ›å»ºç­–ç•¥
        OperationStrategy strategy = StrategyFactory.createStrategy("replace");
        
        // 3. åˆ›å»ºä¸Šä¸‹æ–‡
        OperationContext context = new OperationContext(...);
        
        // 4. å¤„ç†
        tree.process(strategy, context);
        
        // 5. è¾“å‡ºç»“æœ
        System.out.println(context.getStatistics());
    }
}
```

## ğŸ”¨ é‡æ„æ­¥éª¤å»ºè®®

### é˜¶æ®µ1ï¼šåˆ›å»ºæ ¸å¿ƒæ¡†æ¶ï¼ˆä¸ç ´åç°æœ‰ä»£ç ï¼‰

1. åˆ›å»º `core/` åŒ…åŠå…¶å­åŒ…
2. å®ç° `RuleInheritanceContext` å’Œ `OperationContext`
3. å®ç° `FileNode` ä½“ç³»ï¼ˆç»„åˆæ¨¡å¼ï¼‰
4. å®ç° `OperationStrategy` ä½“ç³»ï¼ˆç­–ç•¥æ¨¡å¼ï¼‰
5. å®ç° `FileTreeBuilder`

### é˜¶æ®µ2ï¼šé‡æ„æœåŠ¡å±‚

1. åˆ›å»ºæ–°çš„ `FileReplaceServiceV2` ï¼ˆä½¿ç”¨æ–°æ¡†æ¶ï¼‰
2. å¹¶è¡Œè¿è¡Œæ—§ç‰ˆå’Œæ–°ç‰ˆï¼Œå¯¹æ¯”ç»“æœ
3. é€æ­¥è¿ç§»åŠŸèƒ½åˆ°æ–°ç‰ˆ

### é˜¶æ®µ3ï¼šæ¸…ç†å’Œä¼˜åŒ–

1. åˆ é™¤æ—§ä»£ç 
2. é‡å‘½åä¸º `FileReplaceService`
3. æ·»åŠ å•å…ƒæµ‹è¯•
4. æ€§èƒ½ä¼˜åŒ–